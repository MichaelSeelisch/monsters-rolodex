<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Ch2Ex1 Displaying Text</title>
	
	<style type="text/css" media="screen">
		.page-container {
			position:absolute;
			top:50px;
			left:50px;
		}

		#canvasOne {
			background-color: #CCCCCC;
		}

		.label {
			width: 100px;
			display: inline-block;
			margin-bottom: 10px;
		}
	</style>

	<script src="../_libs/modernizr.js" type="text/javascript" charset="utf-8" async defer></script>
	<script src="../_libs/jscolor/jscolor.js" type="text/javascript" charset="utf-8" async defer></script>
	<script type="text/javascript">
	
		window.addEventListener("load", eventWindowLoaded, false);

		function eventWindowLoaded() {
			canvasApp();
		}

		function canvasSupport() {
			return Modernizr.canvas;
		}

		function canvasApp() {
			if(!canvasSupport()) {
				return;
			}
			else {
				var theCanvas = document.getElementById("canvasOne");
				var context = theCanvas.getContext("2d");
			}

			var message = "HTML5 Canvas";

			var colorStops = new Array(
				{color:"#FF0000", stopPercent:0},
				{color:"#FFFF00", stopPercent:.125},
				{color:"#00FF00", stopPercent:.375},
				{color:"#0000FF", stopPercent:.625},
				{color:"#FF00FF", stopPercent:.875},
				{color:"#FF0000", stopPercent:1}
			);

			function drawScreen() {
				//Background
				context.fillStyle = "#000000";
				context.fillRect(0, 0, theCanvas.width, theCanvas.height);
				
				//Text
				context.font = "90px impact"
				context.textAlign = "center";
				context.textBaseline = "middle";

				var metrics = context.measureText(message);
				var textWidth = metrics.width;
				var xPosition = (theCanvas.width/2);
				var yPosition = (theCanvas.height/2);

				var gradient = context.createLinearGradient(theCanvas.width/2, 0, theCanvas.width/2, theCanvas.height);

				var i;
				var tempColorStop;
				var tempColor;
				var tempStopPercent;
				for(i = 0; i < colorStops.length; i++) {
					tempColorStop = colorStops[i];
					tempColor = tempColorStop.color;
					tempStopPercent = tempColorStop.stopPercent;

					gradient.addColorStop(tempStopPercent,tempColor);
					tempStopPercent += .015;
					
					if(tempStopPercent > 1) {
						tempStopPercent = 0;
					}

					tempColorStop.stopPercent = tempStopPercent;;
					colorStops[i] = tempColorStop;
					
				}

				context.fillStyle = gradient;
				context.fillText(message, xPosition, yPosition);
			}

			function gameLoop() {
				window.setTimeout(gameLoop, 20);
				drawScreen();
			}

			gameLoop();
		}

	</script>

</head>
<body>
	
	<div class="page-container">

		<canvas id="canvasOne" width="600" height="200">
			Your browser does not support HTML5 Canvas.
		</canvas>

	</div>

</body>
</html>