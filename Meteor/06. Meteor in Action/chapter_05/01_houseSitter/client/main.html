<head>
  <title>The HouseSitter</title>
</head>

<body>
  <h1>The House-Sitter App</h1>
  {{> selectHouse}}
  {{> showHouse}}
  {{> houseForm}}
</body>

<template name='selectHouse'>
  <select id='selectHouse'>
    <!-- Begin the list with an empty option to select -->
    <option value='' {{ isSelected }}></option>

    <!-- 'Each' iterates over all objects returned by a helper called houseNameId -->
    {{#each houseNameId}}
      <option value='{{_id}}' {{ isSelected }}>{{name}}</option>}
    {{/each}}
  </select>
</template>

<template name='showHouse'>
  <!-- Setting the data context for the template explicity -->
  {{#with selectedHouse}}
    <!-- Each database field is a property of the house object and can be accessed using dot notation -->
    <h2>Taking care of {{name}}'s house</h2>
    <p>Last visit: {{lastvisit}}</p>

    <!-- 'each' further narrows the data context for the subtemplate -->
    {{#each plants}}
      <!-- A subtemplate, 'plantDetails', is included -->
      {{> plantDetails}}
    {{/each}}
    <button id='delete'>Delete this house</button>
    {{else}}
      You need to select a house.
  {{/with}}
  <hr>
</template>

<template name='plantDetails'>
  <p>
    <strong>Plant color:</strong> {{color}}
  </p>
  <p>
    <strong>Instructions:</strong> {{instructions}}
    <!-- ../id = context from parent node 'showHouse' -->
    <button class='water' data-id='{{../_id}}-{{color}}' {{isWatered}}> 
      Done
    </button>
  </p>
</template>

<template name='houseForm'>
  {{#with selectedHouse}}
    <h3>Add a house</h3>
    <form id='houseForm'>
      Name <input id='house-name' type='text' placeholder='Name' /><br/>
      <u>Plant:</u><br/>
      Color <input id='plant-color' type='text' />
      Instructions <input id='plant-instructions' type='text' />
      <br/>
      <br/>
      <button id='saveHouse'>Save House</button>
    </form>
  {{/with}}
</template>