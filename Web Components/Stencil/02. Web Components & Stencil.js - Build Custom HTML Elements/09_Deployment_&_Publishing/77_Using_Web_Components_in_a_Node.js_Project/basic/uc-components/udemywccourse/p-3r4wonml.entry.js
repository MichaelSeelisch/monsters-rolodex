import{r as t,h as s,c as i,g as e,H as n}from"./p-63ef1f2d.js";const o=class{constructor(s){t(this,s)}render(){return s("div",{class:"lds-ring"},s("div",null),s("div",null),s("div",null),s("div",null))}static get style(){return".lds-ring{position:relative}.lds-ring,.lds-ring div{width:51px;height:51px;margin:6px}.lds-ring div{-webkit-box-sizing:border-box;box-sizing:border-box;display:block;position:absolute;border:6px solid #3b013b;border-radius:50%;-webkit-animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:#3b013b transparent transparent transparent}.lds-ring div:first-child{-webkit-animation-delay:-.45s;animation-delay:-.45s}.lds-ring div:nth-child(2){-webkit-animation-delay:-.3s;animation-delay:-.3s}.lds-ring div:nth-child(3){-webkit-animation-delay:-.15s;animation-delay:-.15s}\@-webkit-keyframes lds-ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}\@keyframes lds-ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}"}},l=class{constructor(s){t(this,s),this.searchResults=[],this.loading=!1,this.ucSymbolSelected=i(this,"ucSymbolSelected",7)}onFindStocks(t){t.preventDefault(),this.loading=!0,fetch(`https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=${this.stockNameInput.value}&apikey=L7K9Q2JR3DN47HSF`).then(t=>t.json()).then(t=>{this.searchResults=t.bestMatches.map(t=>({name:t["2. name"],symbol:t["1. symbol"]})),console.log(this.searchResults)}).catch(t=>{console.log(t)}).finally(()=>{this.loading=!1})}onSelectSymbol(t){this.ucSymbolSelected.emit(t)}render(){let t=s("ul",null,this.searchResults.map(t=>s("li",{onClick:this.onSelectSymbol.bind(this,t.symbol)},s("strong",null,t.symbol)," - ",t.name)));return this.loading&&(t=s("uc-spinner",null,";")),[s("form",{onSubmit:this.onFindStocks.bind(this)},s("input",{id:"stock-symbol",ref:t=>this.stockNameInput=t}),s("button",{type:"submit"},"Find")),t]}static get style(){return":host{border:2px solid var(--color-primary,#000);display:block;font-family:sans-serif;margin:2rem;max-width:100%;padding:1rem;width:20rem}form input{color:#3b013b;display:block;font:inherit;margin-bottom:.5rem;padding:.1rem .25rem}form button:focus,form input:focus{outline:none}form button{background:var(--color-primary,#000);border:1px solid var(--color-primary,#000);color:var(--color-primary-inverse,#fff);cursor:pointer;font:inherit;padding:.25rem .5rem}form button:active,form button:hover{background:var(--color-primary-highlight,grey);border-color:var(--color-primary-highlight,grey)}form button:disabled{background:#ccc;border-color:#ccc;color:#fff;cursor:not-allowed}ul{list-style:none;margin:0;padding:0}li{border:1px solid #ccc;cursor:pointer;margin:.25rem 0;padding:.25rem}li:active,li:hover{background-color:var(--color-primary,#000);color:var (--color-primary-inverse,#fff)}"}},c=class{constructor(s){t(this,s),this.fetchedPrice=0,this.stockInputValid=!1,this.loading=!1}stockSymboChanged(t,s){t!==s&&(this.stockUserInput=t,this.fetchStockPrice(t))}onFetchStockPrice(t){t.preventDefault(),this.stockSymbol=this.stockInput.value}onUserInput(t){this.stockUserInput=t.target.value,this.stockInputValid=""!==this.stockUserInput.trim()}componentWillLoad(){console.log("componentWillLoad"),console.log(this.stockSymbol)}componentDidLoad(){console.log("componentDidLoad"),this.stockSymbol&&(this.stockUserInput=this.stockSymbol,this.stockInputValid=!0,this.fetchStockPrice(this.stockSymbol))}componentWillUpdate(){console.log("componentWillUpdate")}componentDidUpdate(){console.log("componentDidUpdate")}componentDidUnload(){console.log("componentDidUnload")}onStockSymbolSelected(t){console.log("Stock symbol selected: ",t.detail),t.detail&&t.detail!==this.stockSymbol&&this.fetchStockPrice(t.detail)}fetchStockPrice(t){this.loading=!0,fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${t}&apikey=L7K9Q2JR3DN47HSF`).then(t=>{if(200!==t.status)throw new Error("Invalid!");return t.json()}).then(t=>{if(!t["Global Quote"])throw new Error("Invalid symbol!");this.error=null,this.fetchedPrice=+t["Global Quote"]["05. price"]}).catch(t=>{this.error=t.message,this.fetchedPrice=null}).finally(()=>{this.loading=!1})}hostData(){return{class:this.error?"hydrated error":""}}__stencil_render(){let t=s("p",null,"Please enter a symbol!");return this.error&&(t=s("p",null,this.error)),this.fetchedPrice&&(t=s("p",null,"Price: $",this.fetchedPrice)),this.loading&&(t=s("uc-spinner",null)),[s("form",{onSubmit:this.onFetchStockPrice.bind(this)},s("input",{id:"stock-symbol",ref:t=>this.stockInput=t,value:this.stockUserInput,onInput:this.onUserInput.bind(this)}),s("button",{type:"submit",disabled:!this.stockInputValid||this.loading},"Fetch")),s("div",null,t)]}get el(){return e(this)}static get watchers(){return{stockSymbol:["stockSymboChanged"]}}render(){return s(n,this.hostData(),this.__stencil_render())}static get style(){return":host{border:2px solid #3b013b;display:block;font-family:sans-serif;margin:2rem;max-width:100%;padding:1rem;width:20rem}:host(.error){border:2px solid red}form input{color:#3b013b;display:block;font:inherit;margin-bottom:.5rem;padding:.1rem .25rem}form button:focus,form input:focus{outline:none}form button{background:#3b013b;border:1px solid #3b013b;color:#fff;cursor:pointer;font:inherit;padding:.25rem .5rem}form button:active,form button:hover{background:#750175;border-color:#750175}form button:disabled{background:#ccc;border-color:#ccc;color:#fff;cursor:not-allowed}lds-ring{display:inline-block;position:relative;width:64px;height:64px}"}};export{o as uc_spinner,l as uc_stock_finder,c as uc_stock_price};