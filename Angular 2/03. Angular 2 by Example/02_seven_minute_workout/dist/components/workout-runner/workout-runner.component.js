System.register(['../../services/model', '@angular/core'], function(exports_1, context_1) {
    "use strict";
    var __moduleName = context_1 && context_1.id;
    var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
        if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        return c > 3 && r && Object.defineProperty(target, key, r), r;
    };
    var __metadata = (this && this.__metadata) || function (k, v) {
        if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
    };
    var model_1, core_1;
    var WorkoutRunnerComponent;
    return {
        setters:[
            function (model_1_1) {
                model_1 = model_1_1;
            },
            function (core_1_1) {
                core_1 = core_1_1;
            }],
        execute: function() {
            WorkoutRunnerComponent = (function () {
                function WorkoutRunnerComponent() {
                    this.workoutPlan = this.buildWorkout();
                    this.restExercise = new model_1.ExercisePlan(new model_1.Exercise('rest', 'Relax!', 'Relax a bit', 'rest.png'), this.workoutPlan.restBetweenExercise);
                }
                WorkoutRunnerComponent.prototype.ngOnInit = function () {
                    this.start();
                };
                WorkoutRunnerComponent.prototype.buildWorkout = function () {
                    var workout = new model_1.WorkoutPlan('7MinWorkout', '7 Minute Workout', 10, []);
                    workout.exercises.push(new model_1.ExercisePlan(new model_1.Exercise('jumpingJacks', 'Jumping Jacks', 'A jumping jack or stay jump, also called side-straddle hop is a physical jumping exercise.', 'JumpingJacks.png', 'jumpingjacks.wav', "Assume a erect position, with feet together and arms at ypur side...", ['dmYwZH_BND0', 'BABOdJ-2Z60', 'c4DAnQ6DtF8']), 30));
                    workout.exercises.push(new model_1.ExercisePlan(new model_1.Exercise('wallSit', 'Wall Sit', 'A wall sit, also known as a Roman Chair, is an exercise done to strengthen the quadriceps muscles.', 'wallsit.png', 'wallsit.wav', "Place your back against a wall with your feet shoulder width apart and a little ways out from the wall.\n          Then, keeping your back against the wall, lower your hips until your knees form right angles.", ['y-wV4Venusw', 'MMV3v4ap4ro']), 30));
                    workout.exercises.push(new model_1.ExercisePlan(new model_1.Exercise('pushUp', 'Push up', 'A push-up is a common exercise performed in a prone position by raising and lowering the body using the arms', 'pushup.png', 'pushups.wav', "Lie prone on the ground with hands placed as wide or slightly wider than shoulder width.\n          Keeping the body straight, lower body to the ground by bending arms at the elbows.\n          Raise body up off the ground by extending the arms.", ['Eh00_rniF8E', 'ZWdBqFLNljc', 'UwRLWMcOdwI', 'ynPwl6qyUNM', 'OicNTT2xzMI']), 30));
                    workout.exercises.push(new model_1.ExercisePlan(new model_1.Exercise('crunches', 'Abdominal Crunches', 'The basic crunch is a abdominal exercise in a strength-training program.', 'crunches.png', 'crunches.wav', "Lie on your back with your knees bent and feet flat on the floor, hip-width apart.\n          Place your hands behind your head so your thumbs are behind your ears.\n          Hold your elbows out to the sides but rounded slightly in.\n          Gently pull your abdominals inward.\n          Curl up and forward so that your head, neck, and shoulder blades lift off the floor.\n          Hold for a moment at the top of the movement and then lower slowly back down.", ['Xyd_fa5zoEU', 'MKmrqcoCZ-M']), 30));
                    workout.exercises.push(new model_1.ExercisePlan(new model_1.Exercise('stepUpOntoChair', 'Step Up Onto Chair', 'Step exercises are ideal for building muscle in your lower body.', 'stepupontochair.png', 'stepup.wav', "Position your chair in front of you.\n          Stand with your feet about hip width apart, arms at your sides.\n          Step up onto the seat with one foot, pressing down while bringing your other foot up next to it.\n          Step back with the leading foot and bring the trailing foot down to finish one step-up.", ['aajhW7DD1EA']), 30));
                    workout.exercises.push(new model_1.ExercisePlan(new model_1.Exercise('squat', 'Squat', 'The squat is a compound, full body exercise that trains primarily the muscles of the thighs, hips, buttocks and quads.', 'squat.png', 'squats.wav', "Stand with your head facing forward and your chest held up and out.\n              Place your feet shoulder-width apart or little wider. Extend your hands straight out in front of you.\n              Sit back and down like you're sitting into a chair. Keep your head facing straight as your upper body bends forward a bit. Rather than allowing your back to round, let your lower back arch slightly as you go down.\n              Lower down so your thighs are parallel to the floor, with your knees over your ankles. Press your weight back into your heels.\n              Keep your body tight, and push through your heels to bring yourself back to the starting position.", ['QKKZ9AGYTi4', 'UXJrBgI2RxA']), 30));
                    workout.exercises.push(new model_1.ExercisePlan(new model_1.Exercise('tricepdips', 'Tricep Dips On Chair', 'A body weight exercise that targets triceps.', 'tricepdips.png', 'tricepdips.wav', "Sit up on a chair. Your legs should be slightly extended, with your feet flat on the floor.\n          Place your hands edges of the chair. Your palms should be down, fingertips pointing towards the floor.\n          Without moving your legs, bring your glutes forward off the chair.\n          Steadily lower yourself. When your elbows form 90 degrees angles, push yourself back up to starting position.", ['tKjcgfu44sI', 'jox1rb5krQI']), 30));
                    workout.exercises.push(new model_1.ExercisePlan(new model_1.Exercise('plank', 'Plank', 'The plank (also called a front hold, hover, or abdominal bridge) is an isometric core strength exercise that involves maintaining a difficult position for extended periods of time.', 'Plank.png', 'plank.wav', "Get into pushup position on the floor.\n          Bend your elbows 90 degrees and rest your weight on your forearms.\n          Your elbows should be directly beneath your shoulders, and your body should form a straight line from head to feet.\n          Hold this position.", ['pSHjTRCQxIw', 'TvxNkmjdhMM']), 30));
                    workout.exercises.push(new model_1.ExercisePlan(new model_1.Exercise('highKnees', 'High Knees', 'A form exercise that develops strength and endurance of the hip flexors and quads and stretches the hip extensors.', 'highknees.png', 'highknees.wav', "Start standing with feet hip-width apart.\n          Do inplace jog with your knees lifting as much as possible towards your chest.", ['OAJ_J3EZkdY', '8opcQdC-V-U']), 30));
                    workout.exercises.push(new model_1.ExercisePlan(new model_1.Exercise('lunges', 'Lunges', 'Lunges are a good exercise for strengthening, sculpting and building several muscles/muscle groups, including the quadriceps (or thighs), the gluteus maximus (or buttocks) as well as the hamstrings.', 'lunges.png', 'lunge.wav', "Start standing with feet hip-width apart.\n              Do inplace jog with your knees lifting as much as possible towards your chest.", ['Z2n58m2i4jg']), 30));
                    workout.exercises.push(new model_1.ExercisePlan(new model_1.Exercise('pushupNRotate', 'Pushup And Rotate', 'A variation of pushup that requires you to rotate.', 'pushupnrotate.png', 'pushupandrotate.wav', "Assume the classic pushup position, but as you come up, rotate your body so your right arm lifts up and extends overhead.\n          Return to the starting position, lower yourself, then push up and rotate till your left hand points toward the ceiling.", ['qHQ_E-f5278']), 30));
                    workout.exercises.push(new model_1.ExercisePlan(new model_1.Exercise('sidePlank', 'Side Plank', 'A variation to Plank done using one hand only.', 'sideplank.png', 'sideplank.wav', "Lie on your side, in a straight line from head to feet, resting on your forearm.\n          Your elbow should be directly under your shoulder.\n          With your abdominals gently contracted, lift your hips off the floor, maintaining the line.\n          Keep your hips square and your neck in line with your spine. Hold the position.", ['wqzrb67Dwf8', '_rdfjFSFKMY']), 30));
                    return workout;
                };
                WorkoutRunnerComponent.prototype.start = function () {
                    this.workoutTimeRemainig = this.workoutPlan.totalWorkoutDuration();
                    this.currentExerciseIndex = 0;
                    this.startExercise(this.workoutPlan.exercises[this.currentExerciseIndex]);
                };
                WorkoutRunnerComponent.prototype.startExercise = function (exercisePlan) {
                    var _this = this;
                    this.currentExercise = exercisePlan;
                    this.exerciseRunningDuration = 0;
                    var intervalId = setInterval(function () {
                        if (_this.exerciseRunningDuration >= _this.currentExercise.duration) {
                            clearInterval(intervalId);
                            var next = _this.getNextExercise();
                            if (next) {
                                if (next !== _this.restExercise) {
                                    _this.currentExerciseIndex++;
                                }
                                _this.startExercise(next);
                            }
                            else {
                                console.log('Workout complete!');
                            }
                        }
                        else {
                            _this.exerciseRunningDuration++;
                        }
                    }, 1000);
                };
                WorkoutRunnerComponent.prototype.getNextExercise = function () {
                    var nextExercise = null;
                    if (this.currentExercise === this.restExercise) {
                        nextExercise = this.workoutPlan.exercises[this.currentExerciseIndex + 1];
                    }
                    else if (this.currentExerciseIndex < this.workoutPlan.exercises.length - 1) {
                        nextExercise = this.restExercise;
                    }
                    return nextExercise;
                };
                WorkoutRunnerComponent = __decorate([
                    core_1.Component({
                        selector: 'workout-runner',
                        template: "\n    <pre>Current Exercise: {{ currentExercise | json }}</pre>\n    <pre>Time left: {{ currentExercise?.duration-exerciseRunningDuration }}</pre>\n  "
                    }), 
                    __metadata('design:paramtypes', [])
                ], WorkoutRunnerComponent);
                return WorkoutRunnerComponent;
            }());
            exports_1("WorkoutRunnerComponent", WorkoutRunnerComponent);
        }
    }
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvd29ya291dC1ydW5uZXIvd29ya291dC1ydW5uZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1lBa0JBO2dCQVNFO29CQUNFLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO29CQUN2QyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksb0JBQVksQ0FDbEMsSUFBSSxnQkFBUSxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsYUFBYSxFQUFFLFVBQVUsQ0FBQyxFQUN6RCxJQUFJLENBQUMsV0FBVyxDQUFDLG1CQUFtQixDQUNyQyxDQUFDO2dCQUNKLENBQUM7Z0JBRUQseUNBQVEsR0FBUjtvQkFDRSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ2YsQ0FBQztnQkFFRCw2Q0FBWSxHQUFaO29CQUNFLElBQUksT0FBTyxHQUFHLElBQUksbUJBQVcsQ0FBQyxhQUFhLEVBQUUsa0JBQWtCLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO29CQUV6RSxPQUFPLENBQUMsU0FBUyxDQUFDLElBQUksQ0FDcEIsSUFBSSxvQkFBWSxDQUNkLElBQUksZ0JBQVEsQ0FDVixjQUFjLEVBQ2QsZUFBZSxFQUNmLDRGQUE0RixFQUM1RixrQkFBa0IsRUFDbEIsa0JBQWtCLEVBQ2xCLHNFQUFzRSxFQUN0RSxDQUFDLGFBQWEsRUFBRSxhQUFhLEVBQUUsYUFBYSxDQUFDLENBQUMsRUFDOUMsRUFBRSxDQUNILENBQ0YsQ0FBQztvQkFFSixPQUFPLENBQUMsU0FBUyxDQUFDLElBQUksQ0FDcEIsSUFBSSxvQkFBWSxDQUNkLElBQUksZ0JBQVEsQ0FDVixTQUFTLEVBQ1QsVUFBVSxFQUNWLG9HQUFvRyxFQUNwRyxhQUFhLEVBQ2IsYUFBYSxFQUNiLGtOQUM4RixFQUM5RixDQUFDLGFBQWEsRUFBRSxhQUFhLENBQUMsQ0FBQyxFQUNqQyxFQUFFLENBQUMsQ0FDSixD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QUFDLENBQUM7NEJBQzNCLENBQUM7NEJBQ0QsSUFBSSxDQUFDLENBQUM7Z0NBQ0osT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDOzRCQUNuQyxDQUFDO3dCQUNILENBQUM7d0JBQ0QsSUFBSSxDQUFDLENBQUM7NEJBQ0osS0FBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7d0JBQ2pDLENBQUM7b0JBQ0gsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUNYLENBQUM7Z0JBRUQsZ0RBQWUsR0FBZjtvQkFDRSxJQUFJLFlBQVksR0FBaUIsSUFBSSxDQUFDO29CQUV0QyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxLQUFLLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO3dCQUMvQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLG9CQUFvQixHQUFHLENBQUMsQ0FBQyxDQUFDO29CQUMzRSxDQUFDO29CQUNELElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQzNFLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO29CQUNuQyxDQUFDO29CQUVELE1BQU0sQ0FBQyxZQUFZLENBQUM7Z0JBQ3RCLENBQUM7Z0JBdlFIO29CQUFDLGdCQUFTLENBQUM7d0JBQ1QsUUFBUSxFQUFFLGdCQUFnQjt3QkFDMUIsUUFBUSxFQUFFLHdKQUdUO3FCQUNGLENBQUM7OzBDQUFBO2dCQWtRRiw2QkFBQztZQUFELENBaFFBLEFBZ1FDLElBQUE7WUFoUUQsMkRBZ1FDLENBQUEiLCJmaWxlIjoiY29tcG9uZW50cy93b3Jrb3V0LXJ1bm5lci93b3Jrb3V0LXJ1bm5lci5jb21wb25lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBXb3Jrb3V0UGxhbixcbiAgRXhlcmNpc2VQbGFuLFxuICBFeGVyY2lzZSxcbiAgRXhlcmNpc2VQcm9ncmVzc0V2ZW50LFxuICBFeGVyY2lzZUNoYW5nZUV2ZW50XG59IGZyb20gJy4uLy4uL3NlcnZpY2VzL21vZGVsJztcblxuaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnd29ya291dC1ydW5uZXInLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxwcmU+Q3VycmVudCBFeGVyY2lzZToge3sgY3VycmVudEV4ZXJjaXNlIHwganNvbiB9fTwvcHJlPlxuICAgIDxwcmU+VGltZSBsZWZ0OiB7eyBjdXJyZW50RXhlcmNpc2U/LmR1cmF0aW9uLWV4ZXJjaXNlUnVubmluZ0R1cmF0aW9uIH19PC9wcmU+XG4gIGBcbn0pXG5cbmV4cG9ydCBjbGFzcyBXb3Jrb3V0UnVubmVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICB3b3Jrb3V0UGxhbjogV29ya291dFBsYW47XG4gIHJlc3RFeGVyY2lzZTogRXhlcmNpc2VQbGFuO1xuICB3b3Jrb3V0VGltZVJlbWFpbmlnOiBudW1iZXI7XG4gIGN1cnJlbnRFeGVyY2lzZUluZGV4OiBudW1iZXI7XG4gIGN1cnJlbnRFeGVyY2lzZTogRXhlcmNpc2VQbGFuO1xuICBleGVyY2lzZVJ1bm5pbmdEdXJhdGlvbjogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMud29ya291dFBsYW4gPSB0aGlzLmJ1aWxkV29ya291dCgpO1xuICAgIHRoaXMucmVzdEV4ZXJjaXNlID0gbmV3IEV4ZXJjaXNlUGxhbihcbiAgICAgIG5ldyBFeGVyY2lzZSgncmVzdCcsICdSZWxheCEnLCAnUmVsYXggYSBiaXQnLCAncmVzdC5wbmcnKSxcbiAgICAgIHRoaXMud29ya291dFBsYW4ucmVzdEJldHdlZW5FeGVyY2lzZVxuICAgICk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnN0YXJ0KCk7XG4gIH1cblxuICBidWlsZFdvcmtvdXQoKTogV29ya291dFBsYW4ge1xuICAgIGxldCB3b3Jrb3V0ID0gbmV3IFdvcmtvdXRQbGFuKCc3TWluV29ya291dCcsICc3IE1pbnV0ZSBXb3Jrb3V0JywgMTAsIFtdKTtcblxuICAgIHdvcmtvdXQuZXhlcmNpc2VzLnB1c2goXG4gICAgICBuZXcgRXhlcmNpc2VQbGFuKFxuICAgICAgICBuZXcgRXhlcmNpc2UoXG4gICAgICAgICAgJ2p1bXBpbmdKYWNrcycsXG4gICAgICAgICAgJ0p1bXBpbmcgSmFja3MnLFxuICAgICAgICAgICdBIGp1bXBpbmcgamFjayBvciBzdGF5IGp1bXAsIGFsc28gY2FsbGVkIHNpZGUtc3RyYWRkbGUgaG9wIGlzIGEgcGh5c2ljYWwganVtcGluZyBleGVyY2lzZS4nLFxuICAgICAgICAgICdKdW1waW5nSmFja3MucG5nJyxcbiAgICAgICAgICAnanVtcGluZ2phY2tzLndhdicsXG4gICAgICAgICAgYEFzc3VtZSBhIGVyZWN0IHBvc2l0aW9uLCB3aXRoIGZlZXQgdG9nZXRoZXIgYW5kIGFybXMgYXQgeXB1ciBzaWRlLi4uYCxcbiAgICAgICAgICBbJ2RtWXdaSF9CTkQwJywgJ0JBQk9kSi0yWjYwJywgJ2M0REFuUTZEdEY4J10pLFxuICAgICAgICAgIDMwXG4gICAgICAgIClcbiAgICAgICk7XG5cbiAgICB3b3Jrb3V0LmV4ZXJjaXNlcy5wdXNoKFxuICAgICAgbmV3IEV4ZXJjaXNlUGxhbihcbiAgICAgICAgbmV3IEV4ZXJjaXNlKFxuICAgICAgICAgICd3YWxsU2l0JyxcbiAgICAgICAgICAnV2FsbCBTaXQnLFxuICAgICAgICAgICdBIHdhbGwgc2l0LCBhbHNvIGtub3duIGFzIGEgUm9tYW4gQ2hhaXIsIGlzIGFuIGV4ZXJjaXNlIGRvbmUgdG8gc3RyZW5ndGhlbiB0aGUgcXVhZHJpY2VwcyBtdXNjbGVzLicsXG4gICAgICAgICAgJ3dhbGxzaXQucG5nJyxcbiAgICAgICAgICAnd2FsbHNpdC53YXYnLFxuICAgICAgICAgIGBQbGFjZSB5b3VyIGJhY2sgYWdhaW5zdCBhIHdhbGwgd2l0aCB5b3VyIGZlZXQgc2hvdWxkZXIgd2lkdGggYXBhcnQgYW5kIGEgbGl0dGxlIHdheXMgb3V0IGZyb20gdGhlIHdhbGwuXG4gICAgICAgICAgVGhlbiwga2VlcGluZyB5b3VyIGJhY2sgYWdhaW5zdCB0aGUgd2FsbCwgbG93ZXIgeW91ciBoaXBzIHVudGlsIHlvdXIga25lZXMgZm9ybSByaWdodCBhbmdsZXMuYCxcbiAgICAgICAgICBbJ3ktd1Y0VmVudXN3JywgJ01NVjN2NGFwNHJvJ10pLFxuICAgICAgICAzMClcbiAgICAgICk7XG5cbiAgICB3b3Jrb3V0LmV4ZXJjaXNlcy5wdXNoKFxuICAgICAgbmV3IEV4ZXJjaXNlUGxhbihcbiAgICAgICAgbmV3IEV4ZXJjaXNlKFxuICAgICAgICAgICdwdXNoVXAnLFxuICAgICAgICAgICdQdXNoIHVwJyxcbiAgICAgICAgICAnQSBwdXNoLXVwIGlzIGEgY29tbW9uIGV4ZXJjaXNlIHBlcmZvcm1lZCBpbiBhIHByb25lIHBvc2l0aW9uIGJ5IHJhaXNpbmcgYW5kIGxvd2VyaW5nIHRoZSBib2R5IHVzaW5nIHRoZSBhcm1zJyxcbiAgICAgICAgICAncHVzaHVwLnBuZycsXG4gICAgICAgICAgJ3B1c2h1cHMud2F2JyxcbiAgICAgICAgICBgTGllIHByb25lIG9uIHRoZSBncm91bmQgd2l0aCBoYW5kcyBwbGFjZWQgYXMgd2lkZSBvciBzbGlnaHRseSB3aWRlciB0aGFuIHNob3VsZGVyIHdpZHRoLlxuICAgICAgICAgIEtlZXBpbmcgdGhlIGJvZHkgc3RyYWlnaHQsIGxvd2VyIGJvZHkgdG8gdGhlIGdyb3VuZCBieSBiZW5kaW5nIGFybXMgYXQgdGhlIGVsYm93cy5cbiAgICAgICAgICBSYWlzZSBib2R5IHVwIG9mZiB0aGUgZ3JvdW5kIGJ5IGV4dGVuZGluZyB0aGUgYXJtcy5gLFxuICAgICAgICAgIFsnRWgwMF9ybmlGOEUnLCAnWldkQnFGTE5samMnLCAnVXdSTFdNY09kd0knLCAneW5Qd2w2cXlVTk0nLCAnT2ljTlRUMnh6TUknXSksXG4gICAgICAgIDMwKVxuICAgICAgKTtcblxuICAgIHdvcmtvdXQuZXhlcmNpc2VzLnB1c2goXG4gICAgICBuZXcgRXhlcmNpc2VQbGFuKFxuICAgICAgICBuZXcgRXhlcmNpc2UoXG4gICAgICAgICAgJ2NydW5jaGVzJyxcbiAgICAgICAgICAnQWJkb21pbmFsIENydW5jaGVzJyxcbiAgICAgICAgICAnVGhlIGJhc2ljIGNydW5jaCBpcyBhIGFiZG9taW5hbCBleGVyY2lzZSBpbiBhIHN0cmVuZ3RoLXRyYWluaW5nIHByb2dyYW0uJyxcbiAgICAgICAgICAnY3J1bmNoZXMucG5nJyxcbiAgICAgICAgICAnY3J1bmNoZXMud2F2JyxcbiAgICAgICAgICBgTGllIG9uIHlvdXIgYmFjayB3aXRoIHlvdXIga25lZXMgYmVudCBhbmQgZmVldCBmbGF0IG9uIHRoZSBmbG9vciwgaGlwLXdpZHRoIGFwYXJ0LlxuICAgICAgICAgIFBsYWNlIHlvdXIgaGFuZHMgYmVoaW5kIHlvdXIgaGVhZCBzbyB5b3VyIHRodW1icyBhcmUgYmVoaW5kIHlvdXIgZWFycy5cbiAgICAgICAgICBIb2xkIHlvdXIgZWxib3dzIG91dCB0byB0aGUgc2lkZXMgYnV0IHJvdW5kZWQgc2xpZ2h0bHkgaW4uXG4gICAgICAgICAgR2VudGx5IHB1bGwgeW91ciBhYmRvbWluYWxzIGlud2FyZC5cbiAgICAgICAgICBDdXJsIHVwIGFuZCBmb3J3YXJkIHNvIHRoYXQgeW91ciBoZWFkLCBuZWNrLCBhbmQgc2hvdWxkZXIgYmxhZGVzIGxpZnQgb2ZmIHRoZSBmbG9vci5cbiAgICAgICAgICBIb2xkIGZvciBhIG1vbWVudCBhdCB0aGUgdG9wIG9mIHRoZSBtb3ZlbWVudCBhbmQgdGhlbiBsb3dlciBzbG93bHkgYmFjayBkb3duLmAsXG4gICAgICAgICAgWydYeWRfZmE1em9FVScsICdNS21ycWNvQ1otTSddKSxcbiAgICAgICAgMzApXG4gICAgICApO1xuXG4gICAgd29ya291dC5leGVyY2lzZXMucHVzaChcbiAgICAgIG5ldyBFeGVyY2lzZVBsYW4oXG4gICAgICAgIG5ldyBFeGVyY2lzZShcbiAgICAgICAgICAnc3RlcFVwT250b0NoYWlyJyxcbiAgICAgICAgICAnU3RlcCBVcCBPbnRvIENoYWlyJyxcbiAgICAgICAgICAnU3RlcCBleGVyY2lzZXMgYXJlIGlkZWFsIGZvciBidWlsZGluZyBtdXNjbGUgaW4geW91ciBsb3dlciBib2R5LicsXG4gICAgICAgICAgJ3N0ZXB1cG9udG9jaGFpci5wbmcnLFxuICAgICAgICAgICdzdGVwdXAud2F2JyxcbiAgICAgICAgICBgUG9zaXRpb24geW91ciBjaGFpciBpbiBmcm9udCBvZiB5b3UuXG4gICAgICAgICAgU3RhbmQgd2l0aCB5b3VyIGZlZXQgYWJvdXQgaGlwIHdpZHRoIGFwYXJ0LCBhcm1zIGF0IHlvdXIgc2lkZXMuXG4gICAgICAgICAgU3RlcCB1cCBvbnRvIHRoZSBzZWF0IHdpdGggb25lIGZvb3QsIHByZXNzaW5nIGRvd24gd2hpbGUgYnJpbmdpbmcgeW91ciBvdGhlciBmb290IHVwIG5leHQgdG8gaXQuXG4gICAgICAgICAgU3RlcCBiYWNrIHdpdGggdGhlIGxlYWRpbmcgZm9vdCBhbmQgYnJpbmcgdGhlIHRyYWlsaW5nIGZvb3QgZG93biB0byBmaW5pc2ggb25lIHN0ZXAtdXAuYCxcbiAgICAgICAgICBbJ2FhamhXN0REMUVBJ10pLFxuICAgICAgICAzMClcbiAgICAgICk7XG5cbiAgICB3b3Jrb3V0LmV4ZXJjaXNlcy5wdXNoKFxuICAgICAgbmV3IEV4ZXJjaXNlUGxhbihcbiAgICAgICAgbmV3IEV4ZXJjaXNlKFxuICAgICAgICAgICdzcXVhdCcsXG4gICAgICAgICAgJ1NxdWF0JyxcbiAgICAgICAgICAnVGhlIHNxdWF0IGlzIGEgY29tcG91bmQsIGZ1bGwgYm9keSBleGVyY2lzZSB0aGF0IHRyYWlucyBwcmltYXJpbHkgdGhlIG11c2NsZXMgb2YgdGhlIHRoaWdocywgaGlwcywgYnV0dG9ja3MgYW5kIHF1YWRzLicsXG4gICAgICAgICAgJ3NxdWF0LnBuZycsXG4gICAgICAgICAgJ3NxdWF0cy53YXYnLFxuICAgICAgICAgIGBTdGFuZCB3aXRoIHlvdXIgaGVhZCBmYWNpbmcgZm9yd2FyZCBhbmQgeW91ciBjaGVzdCBoZWxkIHVwIGFuZCBvdXQuXG4gICAgICAgICAgICAgIFBsYWNlIHlvdXIgZmVldCBzaG91bGRlci13aWR0aCBhcGFydCBvciBsaXR0bGUgd2lkZXIuIEV4dGVuZCB5b3VyIGhhbmRzIHN0cmFpZ2h0IG91dCBpbiBmcm9udCBvZiB5b3UuXG4gICAgICAgICAgICAgIFNpdCBiYWNrIGFuZCBkb3duIGxpa2UgeW91J3JlIHNpdHRpbmcgaW50byBhIGNoYWlyLiBLZWVwIHlvdXIgaGVhZCBmYWNpbmcgc3RyYWlnaHQgYXMgeW91ciB1cHBlciBib2R5IGJlbmRzIGZvcndhcmQgYSBiaXQuIFJhdGhlciB0aGFuIGFsbG93aW5nIHlvdXIgYmFjayB0byByb3VuZCwgbGV0IHlvdXIgbG93ZXIgYmFjayBhcmNoIHNsaWdodGx5IGFzIHlvdSBnbyBkb3duLlxuICAgICAgICAgICAgICBMb3dlciBkb3duIHNvIHlvdXIgdGhpZ2hzIGFyZSBwYXJhbGxlbCB0byB0aGUgZmxvb3IsIHdpdGggeW91ciBrbmVlcyBvdmVyIHlvdXIgYW5rbGVzLiBQcmVzcyB5b3VyIHdlaWdodCBiYWNrIGludG8geW91ciBoZWVscy5cbiAgICAgICAgICAgICAgS2VlcCB5b3VyIGJvZHkgdGlnaHQsIGFuZCBwdXNoIHRocm91Z2ggeW91ciBoZWVscyB0byBicmluZyB5b3Vyc2VsZiBiYWNrIHRvIHRoZSBzdGFydGluZyBwb3NpdGlvbi5gLFxuICAgICAgICAgIFsnUUtLWjlBR1lUaTQnLCAnVVhKckJnSTJSeEEnXSksXG4gICAgICAgIDMwKVxuICAgICAgKTtcblxuICAgIHdvcmtvdXQuZXhlcmNpc2VzLnB1c2goXG4gICAgICBuZXcgRXhlcmNpc2VQbGFuKFxuICAgICAgICBuZXcgRXhlcmNpc2UoXG4gICAgICAgICAgJ3RyaWNlcGRpcHMnLFxuICAgICAgICAgICdUcmljZXAgRGlwcyBPbiBDaGFpcicsXG4gICAgICAgICAgJ0EgYm9keSB3ZWlnaHQgZXhlcmNpc2UgdGhhdCB0YXJnZXRzIHRyaWNlcHMuJyxcbiAgICAgICAgICAndHJpY2VwZGlwcy5wbmcnLFxuICAgICAgICAgICd0cmljZXBkaXBzLndhdicsXG4gICAgICAgICAgYFNpdCB1cCBvbiBhIGNoYWlyLiBZb3VyIGxlZ3Mgc2hvdWxkIGJlIHNsaWdodGx5IGV4dGVuZGVkLCB3aXRoIHlvdXIgZmVldCBmbGF0IG9uIHRoZSBmbG9vci5cbiAgICAgICAgICBQbGFjZSB5b3VyIGhhbmRzIGVkZ2VzIG9mIHRoZSBjaGFpci4gWW91ciBwYWxtcyBzaG91bGQgYmUgZG93biwgZmluZ2VydGlwcyBwb2ludGluZyB0b3dhcmRzIHRoZSBmbG9vci5cbiAgICAgICAgICBXaXRob3V0IG1vdmluZyB5b3VyIGxlZ3MsIGJyaW5nIHlvdXIgZ2x1dGVzIGZvcndhcmQgb2ZmIHRoZSBjaGFpci5cbiAgICAgICAgICBTdGVhZGlseSBsb3dlciB5b3Vyc2VsZi4gV2hlbiB5b3VyIGVsYm93cyBmb3JtIDkwIGRlZ3JlZXMgYW5nbGVzLCBwdXNoIHlvdXJzZWxmIGJhY2sgdXAgdG8gc3RhcnRpbmcgcG9zaXRpb24uYCxcbiAgICAgICAgICBbJ3RLamNnZnU0NHNJJywgJ2pveDFyYjVrclFJJ10pLFxuICAgICAgICAzMClcbiAgICAgICk7XG5cbiAgICB3b3Jrb3V0LmV4ZXJjaXNlcy5wdXNoKFxuICAgICAgbmV3IEV4ZXJjaXNlUGxhbihcbiAgICAgICAgbmV3IEV4ZXJjaXNlKFxuICAgICAgICAgICdwbGFuaycsXG4gICAgICAgICAgJ1BsYW5rJyxcbiAgICAgICAgICAnVGhlIHBsYW5rIChhbHNvIGNhbGxlZCBhIGZyb250IGhvbGQsIGhvdmVyLCBvciBhYmRvbWluYWwgYnJpZGdlKSBpcyBhbiBpc29tZXRyaWMgY29yZSBzdHJlbmd0aCBleGVyY2lzZSB0aGF0IGludm9sdmVzIG1haW50YWluaW5nIGEgZGlmZmljdWx0IHBvc2l0aW9uIGZvciBleHRlbmRlZCBwZXJpb2RzIG9mIHRpbWUuJyxcbiAgICAgICAgICAnUGxhbmsucG5nJyxcbiAgICAgICAgICAncGxhbmsud2F2JyxcbiAgICAgICAgICBgR2V0IGludG8gcHVzaHVwIHBvc2l0aW9uIG9uIHRoZSBmbG9vci5cbiAgICAgICAgICBCZW5kIHlvdXIgZWxib3dzIDkwIGRlZ3JlZXMgYW5kIHJlc3QgeW91ciB3ZWlnaHQgb24geW91ciBmb3JlYXJtcy5cbiAgICAgICAgICBZb3VyIGVsYm93cyBzaG91bGQgYmUgZGlyZWN0bHkgYmVuZWF0aCB5b3VyIHNob3VsZGVycywgYW5kIHlvdXIgYm9keSBzaG91bGQgZm9ybSBhIHN0cmFpZ2h0IGxpbmUgZnJvbSBoZWFkIHRvIGZlZXQuXG4gICAgICAgICAgSG9sZCB0aGlzIHBvc2l0aW9uLmAsXG4gICAgICAgICAgWydwU0hqVFJDUXhJdycsICdUdnhOa21qZGhNTSddKSxcbiAgICAgICAgMzApXG4gICAgICApO1xuXG4gICAgd29ya291dC5leGVyY2lzZXMucHVzaChcbiAgICAgIG5ldyBFeGVyY2lzZVBsYW4oXG4gICAgICAgIG5ldyBFeGVyY2lzZShcbiAgICAgICAgICAnaGlnaEtuZWVzJyxcbiAgICAgICAgICAnSGlnaCBLbmVlcycsXG4gICAgICAgICAgJ0EgZm9ybSBleGVyY2lzZSB0aGF0IGRldmVsb3BzIHN0cmVuZ3RoIGFuZCBlbmR1cmFuY2Ugb2YgdGhlIGhpcCBmbGV4b3JzIGFuZCBxdWFkcyBhbmQgc3RyZXRjaGVzIHRoZSBoaXAgZXh0ZW5zb3JzLicsXG4gICAgICAgICAgJ2hpZ2hrbmVlcy5wbmcnLFxuICAgICAgICAgICdoaWdoa25lZXMud2F2JyxcbiAgICAgICAgICBgU3RhcnQgc3RhbmRpbmcgd2l0aCBmZWV0IGhpcC13aWR0aCBhcGFydC5cbiAgICAgICAgICBEbyBpbnBsYWNlIGpvZyB3aXRoIHlvdXIga25lZXMgbGlmdGluZyBhcyBtdWNoIGFzIHBvc3NpYmxlIHRvd2FyZHMgeW91ciBjaGVzdC5gLFxuICAgICAgICAgIFsnT0FKX0ozRVprZFknLCAnOG9wY1FkQy1WLVUnXSksXG4gICAgICAgIDMwKVxuICAgICAgKTtcblxuICAgIHdvcmtvdXQuZXhlcmNpc2VzLnB1c2goXG4gICAgICBuZXcgRXhlcmNpc2VQbGFuKFxuICAgICAgICBuZXcgRXhlcmNpc2UoXG4gICAgICAgICAgJ2x1bmdlcycsXG4gICAgICAgICAgJ0x1bmdlcycsXG4gICAgICAgICAgJ0x1bmdlcyBhcmUgYSBnb29kIGV4ZXJjaXNlIGZvciBzdHJlbmd0aGVuaW5nLCBzY3VscHRpbmcgYW5kIGJ1aWxkaW5nIHNldmVyYWwgbXVzY2xlcy9tdXNjbGUgZ3JvdXBzLCBpbmNsdWRpbmcgdGhlIHF1YWRyaWNlcHMgKG9yIHRoaWdocyksIHRoZSBnbHV0ZXVzIG1heGltdXMgKG9yIGJ1dHRvY2tzKSBhcyB3ZWxsIGFzIHRoZSBoYW1zdHJpbmdzLicsXG4gICAgICAgICAgJ2x1bmdlcy5wbmcnLFxuICAgICAgICAgICdsdW5nZS53YXYnLFxuICAgICAgICAgIGBTdGFydCBzdGFuZGluZyB3aXRoIGZlZXQgaGlwLXdpZHRoIGFwYXJ0LlxuICAgICAgICAgICAgICBEbyBpbnBsYWNlIGpvZyB3aXRoIHlvdXIga25lZXMgbGlmdGluZyBhcyBtdWNoIGFzIHBvc3NpYmxlIHRvd2FyZHMgeW91ciBjaGVzdC5gLFxuICAgICAgICAgIFsnWjJuNThtMmk0amcnXSksXG4gICAgICAgIDMwKVxuICAgICAgKTtcblxuICAgIHdvcmtvdXQuZXhlcmNpc2VzLnB1c2goXG4gICAgICBuZXcgRXhlcmNpc2VQbGFuKFxuICAgICAgICBuZXcgRXhlcmNpc2UoXG4gICAgICAgICAgJ3B1c2h1cE5Sb3RhdGUnLFxuICAgICAgICAgICdQdXNodXAgQW5kIFJvdGF0ZScsXG4gICAgICAgICAgJ0EgdmFyaWF0aW9uIG9mIHB1c2h1cCB0aGF0IHJlcXVpcmVzIHlvdSB0byByb3RhdGUuJyxcbiAgICAgICAgICAncHVzaHVwbnJvdGF0ZS5wbmcnLFxuICAgICAgICAgICdwdXNodXBhbmRyb3RhdGUud2F2JyxcbiAgICAgICAgICBgQXNzdW1lIHRoZSBjbGFzc2ljIHB1c2h1cCBwb3NpdGlvbiwgYnV0IGFzIHlvdSBjb21lIHVwLCByb3RhdGUgeW91ciBib2R5IHNvIHlvdXIgcmlnaHQgYXJtIGxpZnRzIHVwIGFuZCBleHRlbmRzIG92ZXJoZWFkLlxuICAgICAgICAgIFJldHVybiB0byB0aGUgc3RhcnRpbmcgcG9zaXRpb24sIGxvd2VyIHlvdXJzZWxmLCB0aGVuIHB1c2ggdXAgYW5kIHJvdGF0ZSB0aWxsIHlvdXIgbGVmdCBoYW5kIHBvaW50cyB0b3dhcmQgdGhlIGNlaWxpbmcuYCxcbiAgICAgICAgICBbJ3FIUV9FLWY1Mjc4J10pLFxuICAgICAgICAzMClcbiAgICAgICk7XG5cbiAgICB3b3Jrb3V0LmV4ZXJjaXNlcy5wdXNoKFxuICAgICAgbmV3IEV4ZXJjaXNlUGxhbihcbiAgICAgICAgbmV3IEV4ZXJjaXNlKFxuICAgICAgICAgICdzaWRlUGxhbmsnLFxuICAgICAgICAgICdTaWRlIFBsYW5rJyxcbiAgICAgICAgICAnQSB2YXJpYXRpb24gdG8gUGxhbmsgZG9uZSB1c2luZyBvbmUgaGFuZCBvbmx5LicsXG4gICAgICAgICAgJ3NpZGVwbGFuay5wbmcnLFxuICAgICAgICAgICdzaWRlcGxhbmsud2F2JyxcbiAgICAgICAgICBgTGllIG9uIHlvdXIgc2lkZSwgaW4gYSBzdHJhaWdodCBsaW5lIGZyb20gaGVhZCB0byBmZWV0LCByZXN0aW5nIG9uIHlvdXIgZm9yZWFybS5cbiAgICAgICAgICBZb3VyIGVsYm93IHNob3VsZCBiZSBkaXJlY3RseSB1bmRlciB5b3VyIHNob3VsZGVyLlxuICAgICAgICAgIFdpdGggeW91ciBhYmRvbWluYWxzIGdlbnRseSBjb250cmFjdGVkLCBsaWZ0IHlvdXIgaGlwcyBvZmYgdGhlIGZsb29yLCBtYWludGFpbmluZyB0aGUgbGluZS5cbiAgICAgICAgICBLZWVwIHlvdXIgaGlwcyBzcXVhcmUgYW5kIHlvdXIgbmVjayBpbiBsaW5lIHdpdGggeW91ciBzcGluZS4gSG9sZCB0aGUgcG9zaXRpb24uYCxcbiAgICAgICAgICBbJ3dxenJiNjdEd2Y4JywgJ19yZGZqRlNGS01ZJ10pLFxuICAgICAgICAzMClcbiAgICAgICk7XG5cbiAgICByZXR1cm4gd29ya291dDtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIHRoaXMud29ya291dFRpbWVSZW1haW5pZyA9IHRoaXMud29ya291dFBsYW4udG90YWxXb3Jrb3V0RHVyYXRpb24oKTtcbiAgICB0aGlzLmN1cnJlbnRFeGVyY2lzZUluZGV4ID0gMDtcbiAgICB0aGlzLnN0YXJ0RXhlcmNpc2UodGhpcy53b3Jrb3V0UGxhbi5leGVyY2lzZXNbdGhpcy5jdXJyZW50RXhlcmNpc2VJbmRleF0pO1xuICB9XG5cbiAgc3RhcnRFeGVyY2lzZShleGVyY2lzZVBsYW46IEV4ZXJjaXNlUGxhbikge1xuICAgIHRoaXMuY3VycmVudEV4ZXJjaXNlID0gZXhlcmNpc2VQbGFuO1xuICAgIHRoaXMuZXhlcmNpc2VSdW5uaW5nRHVyYXRpb24gPSAwO1xuXG4gICAgbGV0IGludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5leGVyY2lzZVJ1bm5pbmdEdXJhdGlvbiA+PSB0aGlzLmN1cnJlbnRFeGVyY2lzZS5kdXJhdGlvbikge1xuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpO1xuXG4gICAgICAgIGxldCBuZXh0OiBFeGVyY2lzZVBsYW4gPSB0aGlzLmdldE5leHRFeGVyY2lzZSgpO1xuXG4gICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgaWYgKG5leHQgIT09IHRoaXMucmVzdEV4ZXJjaXNlKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRFeGVyY2lzZUluZGV4Kys7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5zdGFydEV4ZXJjaXNlKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdXb3Jrb3V0IGNvbXBsZXRlIScpO1xuICAgICAgICB9IFxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuZXhlcmNpc2VSdW5uaW5nRHVyYXRpb24rKztcbiAgICAgIH1cbiAgICB9LCAxMDAwKTtcbiAgfVxuXG4gIGdldE5leHRFeGVyY2lzZSgpOiBFeGVyY2lzZVBsYW4ge1xuICAgIGxldCBuZXh0RXhlcmNpc2U6IEV4ZXJjaXNlUGxhbiA9IG51bGw7XG5cbiAgICBpZiAodGhpcy5jdXJyZW50RXhlcmNpc2UgPT09IHRoaXMucmVzdEV4ZXJjaXNlKSB7XG4gICAgICBuZXh0RXhlcmNpc2UgPSB0aGlzLndvcmtvdXRQbGFuLmV4ZXJjaXNlc1t0aGlzLmN1cnJlbnRFeGVyY2lzZUluZGV4ICsgMV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuY3VycmVudEV4ZXJjaXNlSW5kZXggPCB0aGlzLndvcmtvdXRQbGFuLmV4ZXJjaXNlcy5sZW5ndGggLSAxKSB7XG4gICAgICBuZXh0RXhlcmNpc2UgPSB0aGlzLnJlc3RFeGVyY2lzZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG5leHRFeGVyY2lzZTtcbiAgfVxufVxuIl19
